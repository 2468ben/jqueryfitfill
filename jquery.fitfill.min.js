!function(e){var t=function(t,n,o){o=e.extend({centerW:!0,centerH:!0,how:"fit"},o);var i=t.get(0),a=n?i.width/i.height:t.width()/t.height(),r=o.parentEl||t.parent(),s=r.innerWidth(),l=r.innerHeight(),c=s/l,u="fit"===o.how&&c>a||"fill"===o.how&&a>c;t.css(u?{height:l,width:l*a}:{width:s,height:s/a}),o.centerW&&t.css("margin-left",(s-t.width())/2+"px"),o.centerH&&t.css("margin-top",(l-t.height())/2+"px")},n=function(e,t,n){var o=e.get(0);o&&o.width&&o.height?(t(e,!0,n),n.success&&n.success(e)):e.load(function(){t(e,!1,n),n.success&&n.success(e)}).error(function(){t(e,!1,n),n.error&&n.error(e)})},o=function(o,i,a){var r=e(i).find(" > img");r&&n(r,t,e.extend(a,{how:o}))};e.fn.fit=function(e){o("fit",this,e)},e.fn.fill=function(e){o("fill",this,e)},e.fn.fitAll=function(t){this.each(function(){e(this).fit(t)})},e.fn.fillAll=function(t){this.each(function(){e(this).fill(t)})}}(jQuery);
